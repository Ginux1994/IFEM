PROJECT(IFEM_Apps)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

# Add local modules
SET(IFEM_PATH ${PROJECT_SOURCE_DIR}/..)
SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${IFEM_PATH}/cmake/Modules)
FIND_PACKAGE(IFEM REQUIRED)

ENABLE_TESTING()

include_directories(${IFEM_INCLUDES})

SET(ORIG_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${IFEM_CXX_FLAGS}")
IF(NOT IFEM_AS_SUBMODULE)
  SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DPROFILE_LEVEL=2")
ENDIF(NOT IFEM_AS_SUBMODULE)

SET(EXECUTABLE_OUTPUT_PATH bin)
SET(IFEM_COMMON_APP_BUILD 1)

ADD_SUBDIRECTORY(Common)
ADD_SUBDIRECTORY(Poisson)
ADD_SUBDIRECTORY(AdvectionDiffusion)
ADD_SUBDIRECTORY(Darcy)
ADD_SUBDIRECTORY(Elasticity)
ADD_SUBDIRECTORY(Elasticity/Beam)
ADD_SUBDIRECTORY(Elasticity/BeamEx)
ADD_SUBDIRECTORY(Elasticity/FiniteDeformation)
ADD_SUBDIRECTORY(Elasticity/Linear)
ADD_SUBDIRECTORY(Elasticity/Nonlinear)
ADD_SUBDIRECTORY(Elasticity/BeamSim)
ADD_SUBDIRECTORY(FSWallDistance)
ADD_SUBDIRECTORY(PoroElasticity)
ADD_SUBDIRECTORY(ThermoElasticity)
ADD_SUBDIRECTORY(FractureDynamics)
ADD_SUBDIRECTORY(FSWallDistance)
ADD_SUBDIRECTORY(Stokes)
ADD_SUBDIRECTORY(HDF5toVTx)

# Add 'check' target which builds all test applications, then executes the tests
add_check_target()
